!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["tmdb-typescript-api"]={})}(this,function(t){"use strict";var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function r(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n,o={e:{}};function s(){try{return n.apply(this,arguments)}catch(t){return o.e=t,o}}function i(t){return n=t,s}function u(t){return"function"==typeof t}var c=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;c=t},get useDeprecatedSynchronousErrorHandling(){return c}};function p(t){setTimeout(function(){throw t})}var h={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;p(t)},complete:function(){}},f=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return null!=t&&"object"==typeof t}var b=function(t){function e(r){var n=t.call(this,r?r.length+" errors occurred during unsubscription:\n  "+r.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return n.errors=r,n.name="UnsubscriptionError",Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e}(Error),y=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,s=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,p=n?n.length:0;r;)r.remove(this),r=++a<p&&n[a]||null;if(u(s))i(s).call(this)===o&&(e=!0,t=t||(o.e instanceof b?d(o.e.errors):[o.e]));if(f(c))for(a=-1,p=c.length;++a<p;){var h=c[a];if(l(h))if(i(h.unsubscribe).call(h)===o){e=!0,t=t||[];var y=o.e;y instanceof b?t=t.concat(d(y.errors)):t.push(y)}}if(e)throw new b(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function d(t){return t.reduce(function(t,e){return t.concat(e instanceof b?e.errors:e)},[])}var v="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",w=function(t){function e(e,r,n){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=h;break;case 1:if(!e){o.destination=h;break}if("object"==typeof e){if(g(e)){var s=e[v]();o.syncErrorThrowable=s.syncErrorThrowable,o.destination=s,s.add(o)}else o.syncErrorThrowable=!0,o.destination=new _(o,e);break}default:o.syncErrorThrowable=!0,o.destination=new _(o,e,r,n)}return o}return r(e,t),e.prototype[v]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(y),_=function(t){function e(e,r,n,o){var s,i=t.call(this)||this;i._parentSubscriber=e;var c=i;return u(r)?s=r:r&&(s=r.next,n=r.error,o=r.complete,r!==h&&(u((c=Object.create(r)).unsubscribe)&&i.add(c.unsubscribe.bind(c)),c.unsubscribe=i.unsubscribe.bind(i))),i._context=c,i._next=s,i._error=n,i._complete=o,i}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):p(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;p(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;p(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(p(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(w);function g(t){return t instanceof w||"syncErrorThrowable"in t&&t[v]}var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(){}var S=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=function(t,e,r){if(t){if(t instanceof w)return t;if(t[v])return t[v]()}return t||e||r?new w(t,e,r):new w(h)}(t,e,r);if(n?n.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=E(e))(function(e,n){var o;o=r.subscribe(function(e){try{t(e)}catch(t){n(t),o&&o.unsubscribe()}},n,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[x]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:m)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=E(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();function E(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}if(!Set)throw new Error("Set is not present, please polyfill");Error,Error,Error;if(!Map)throw new Error("Map not found, please polyfill");function T(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new O(t,e))}}var O=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new j(t,this.project,this.thisArg))},t}(),j=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(w);Error;var P="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,H=P||D||q;function M(t,e){return void 0===e&&(e=null),new L({method:"GET",url:t,headers:e})}function A(t,e,r){return new L({method:"POST",url:t,body:e,headers:r})}function k(t,e){return new L({method:"DELETE",url:t,headers:e})}function R(t,e,r){return new L({method:"PUT",url:t,body:e,headers:r})}function X(t,e,r){return new L({method:"PATCH",url:t,body:e,headers:r})}var C=T(function(t,e){return t.response});function U(t,e){return C(new L({method:"GET",url:t,responseType:"json",headers:e}))}var L=function(t){function e(e){var r=t.call(this)||this,n={async:!0,createXHR:function(){return this.crossDomain?function(){if(H.XMLHttpRequest)return new H.XMLHttpRequest;if(H.XDomainRequest)return new H.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(H.XMLHttpRequest)return new H.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(t=e[r],new H.ActiveXObject(t))break}catch(t){}return new H.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)n.url=e;else for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return r.request=n,r}var n;return r(e,t),e.prototype._subscribe=function(t){return new K(t,this.request)},e.create=((n=function(t){return new e(t)}).get=M,n.post=A,n.delete=k,n.put=R,n.patch=X,n.getJSON=U,n),e}(S),K=function(t){function e(e,r){var n=t.call(this,e)||this;n.request=r,n.done=!1;var o=r.headers=r.headers||{};return r.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in o||H.FormData&&r.body instanceof H.FormData||void 0===r.body||(o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=n.serializeBody(r.body,r.headers["Content-Type"]),n.send(),n}return r(e,t),e.prototype.next=function(t){this.done=!0;var e=this.xhr,r=this.request,n=this.destination,o=new G(t,e,r);n.next(o)},e.prototype.send=function(){var t=this.request,e=this.request,r=e.user,n=e.method,s=e.url,u=e.async,c=e.password,a=e.headers,p=e.body,h=i(t.createXHR).call(t);if(h===o)this.error(o.e);else{this.xhr=h,this.setupEvents(h,t);if((r?i(h.open).call(h,n,s,u,r,c):i(h.open).call(h,n,s,u))===o)return this.error(o.e),null;if(u&&(h.timeout=t.timeout,h.responseType=t.responseType),"withCredentials"in h&&(h.withCredentials=!!t.withCredentials),this.setHeaders(h,a),(p?i(h.send).call(h,p):i(h.send).call(h))===o)return this.error(o.e),null}return h},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(H.FormData&&t instanceof H.FormData)return t;if(e){var r=e.indexOf(";");-1!==r&&(e=e.substring(0,r))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURI(e)+"="+encodeURI(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])},e.prototype.setupEvents=function(t,e){var r=e.progressSubscriber;function n(t){var e=n,r=e.subscriber,o=e.progressSubscriber,s=e.request;o&&o.error(t),r.error(new V(this,s))}if(t.ontimeout=n,n.request=e,n.subscriber=this,n.progressSubscriber=r,t.upload&&"withCredentials"in t){var o,s;if(r)o=function(t){o.progressSubscriber.next(t)},H.XDomainRequest?t.onprogress=o:t.upload.onprogress=o,o.progressSubscriber=r;s=function(t){var e=s,r=e.progressSubscriber,n=e.subscriber,o=e.request;r&&r.error(t),n.error(new F("ajax error",this,o))},t.onerror=s,s.request=e,s.subscriber=this,s.progressSubscriber=r}function i(t){var e=i,r=e.subscriber,n=e.progressSubscriber,o=e.request;if(4===this.readyState){var s=1223===this.status?204:this.status,u="text"===this.responseType?this.response||this.responseText:this.response;0===s&&(s=u?200:0),s<400?(n&&n.complete(),r.next(t),r.complete()):(n&&n.error(t),r.error(new F("ajax error "+s,this,o)))}}t.onreadystatechange=i,i.subscriber=this,i.progressSubscriber=r,i.request=e},e.prototype.unsubscribe=function(){var e=this.done,r=this.xhr;!e&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),t.prototype.unsubscribe.call(this)},e}(w),G=function(){return function(t,e,r){this.originalEvent=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=N(this.responseType,e)}}(),F=function(t){function e(r,n,o){var s=t.call(this,r)||this;return s.message=r,s.xhr=n,s.request=o,s.status=n.status,s.responseType=n.responseType||o.responseType,s.response=N(s.responseType,n),s.name="AjaxError",Object.setPrototypeOf(s,e.prototype),s}return r(e,t),e}(Error);function N(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var V=function(t){function e(r,n){var o=t.call(this,"ajax timeout",r,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return r(e,t),e}(F),J=L.create,W=function(){function t(){}return t.ajaxObservable=function(t){return J({url:t,crossDomain:!0}).pipe(T(function(t){return t.response}))},t}(),z=function(){function t(t){this.context=t}return t.prototype.url=function(t,e,r){return this.context.baseUrl+"/search/"+t+"?api_key="+this.context.apiKey+"&language="+this.context.language+"&query="+e+"&page="+r},t.prototype.collections=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("collection",t,e))},t.prototype.companies=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("company",t,e))},t.prototype.keywords=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("keyword",t,e))},t.prototype.movies=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("movie",t,e))},t.prototype.multi=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("multi",t,e))},t.prototype.people=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("person",t,e))},t.prototype.tvshows=function(t,e){return void 0===e&&(e=1),W.ajaxObservable(this.url("tv",t,e))},t}(),Y=function(){return function(){this.language="en",this.baseUrl="https://api.themoviedb.org/3"}}(),B=function(){function t(t){this.context=t}return t.prototype.details=function(t){var e=this.context.baseUrl+"/movie/"+t+"?api_key="+this.context.apiKey+"&language="+this.context.language;return W.ajaxObservable(e)},t}(),I=function(){function t(t){this.context=t}return t.prototype.details=function(t){var e=this.context.baseUrl+"/collection/"+t+"?api_key="+this.context.apiKey+"&language="+this.context.language;return W.ajaxObservable(e)},t}(),Q=function(){function t(t){this.context=t}return t.prototype.details=function(t){var e=this.context.baseUrl+"/person/"+t+"?api_key="+this.context.apiKey+"&language="+this.context.language;return W.ajaxObservable(e)},t}(),Z=function(){function t(t){this.context=t}return t.prototype.details=function(t){var e=this.context.baseUrl+"/tv/"+t+"?api_key="+this.context.apiKey+"&language="+this.context.language;return W.ajaxObservable(e)},t}(),$=function(){function t(t,e){void 0===e&&(e="en"),this.context=new Y,this.context.apiKey=t,this.context.language=e}return Object.defineProperty(t.prototype,"search",{get:function(){return this._search||(this._search=new z(this.context))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movies",{get:function(){return this._movies||(this._movies=new B(this.context))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collections",{get:function(){return this._collections||(this._collections=new I(this.context))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"people",{get:function(){return this._people||(this._people=new Q(this.context))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tvshows",{get:function(){return this._tvshows||(this._tvshows=new Z(this.context))},enumerable:!0,configurable:!0}),t}(),tt=function(){return function(){}}(),et=function(){return function(){}}(),rt=function(){return function(){}}(),nt=function(){return function(){}}(),ot=function(){return function(){}}(),st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function it(t,e){function r(){this.constructor=t}st(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e}(rt),ct=function(){return function(){}}(),at=function(){return function(){}}(),pt=function(){return function(){}}(),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e}(tt),ft=function(){return function(){}}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e}(ft),bt=function(){return function(){}}(),yt=function(){return function(){}}(),dt=function(){return function(){}}(),vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.created_by=[],e.episode_run_time=[],e.languages=[],e.networks=[],e.production_companies=[],e.seasons=[],e}return it(e,t),e}(dt);t.TmdbApi=$,t.Context=Y,t.Helper=W,t.CollectionsApi=I,t.MoviesApi=B,t.PeopleApi=Q,t.SearchApi=z,t.TvApi=Z,t.Movie=tt,t.Network=et,t.Collection=rt,t.Company=nt,t.Language=ot,t.CollectionDetails=ut,t.Country=ct,t.Genre=at,t.Keyword=pt,t.MovieDetails=ht,t.PersonDetails=lt,t.SearchResult=bt,t.Person=ft,t.Season=yt,t.TvShowDetails=vt,t.TvShow=dt,Object.defineProperty(t,"__esModule",{value:!0})});
